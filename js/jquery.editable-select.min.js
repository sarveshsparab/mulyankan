/**
 * jQuery Editable Select
 * by Indri Muska <indrimuska@gmail.com>
 *
 * Source on GitHub @ https://github.com/indrimuska/jquery-editable-select
 *
 * File: jquery.editable-select.min.js
 * Minifier: http://closure-compiler.appspot.com/home
 */

 (function(c){c.extend(c.expr[":"],{nic:function(a,c,e,b){return!(0<=(a.textContent||a.innerText||"").toLowerCase().indexOf((e[3]||"").toLowerCase()))}});c.fn.editableSelect=function(a){var g=this.clone(),e=c('<input type="text">'),b=c('<ul class="es-list">');a=c.extend({},{filter:!0,effect:"default",duration:"fast",onCreate:null,onShow:null,onHide:null,onSelect:null},a);switch(a.effects){case "default":case "fade":case "slide":break;default:a.effects="default"}if(isNaN(a.duration)||"fast"!=a.duration||
"slow"!=a.duration)a.duration="fast";this.replaceWith(e);({init:function(){var f=this;f.copyAttributes(g,e);e.addClass("es-input");c(document.body).append(b);g.find("option").each(function(){var a=c("<li>"),d=c(this);a.data("value",d.val());a.html(d.text());f.copyAttributes(this,a);b.append(a);c(this).attr("selected")&&e.val(d.text())});e.on("focus input click",f.show);c(document).on("click",function(a){c(a.target).is(e)||c(a.target).is(b)||f.hide()});f.initializeList();f.initializeEvents();a.onCreate&&
a.onCreate.call(this,e)},initializeList:function(){var a=this;b.find("li").each(function(){c(this).on("mousemove",function(){b.find(".selected").removeClass("selected");c(this).addClass("selected")});c(this).on("click",function(){a.setField.call(this,a)})});b.mouseenter(function(){b.find("li.selected").removeClass("selected")})},initializeEvents:function(){var a=this;e.bind("input keydown",function(c){switch(c.keyCode){case 40:a.show();c=b.find("li:visible");var d=c.filter("li.selected");b.find(".selected").removeClass("selected");
d=c.eq(0<d.size()?c.index(d)+1:0);d=(0<d.size()?d:b.find("li:visible:first")).addClass("selected");a.scroll(d,!0);break;case 38:a.show();c=b.find("li:visible");d=c.filter("li.selected");b.find("li.selected").removeClass("selected");d=c.eq(0<d.size()?c.index(d)-1:-1);(0<d.size()?d:b.find("li:visible:last")).addClass("selected");a.scroll(d,!1);break;case 13:b.is(":visible")&&(a.setField.call(b.find("li.selected"),a),c.preventDefault());case 9:case 27:a.hide();break;default:a.show()}})},show:function(){b.find("li").show();
b.css({top:e.offset().top+e.outerHeight()-1,left:e.offset().left,width:e.innerWidth()});if((a.filter?b.find("li:nic("+e.val()+")").hide().size():0)==b.find("li").size())b.hide();else switch(a.effects){case "fade":b.fadeIn(a.duration);break;case "slide":b.slideDown(a.duration);break;default:b.show(a.duration)}a.onShow&&a.onShow.call(this,e)},hide:function(){switch(a.effects){case "fade":b.fadeOut(a.duration);break;case "slide":b.slideUp(a.duration);break;default:b.hide(a.duration)}a.onHide&&a.onHide.call(this,
e)},scroll:function(a,e){var d=0,h=b.find("li:visible").index(a);b.find("li:visible").each(function(a,b){a<h&&(d+=c(b).outerHeight())});if(d+a.outerHeight()>=b.scrollTop()+b.outerHeight()||d<=b.scrollTop())e?b.scrollTop(d+a.outerHeight()-b.outerHeight()):b.scrollTop(d)},copyAttributes:function(a,b){var d=c(a)[0].attributes,e;for(e in d)c(b).attr(d[e].nodeName,d[e].nodeValue)},setField:function(b){if(!c(this).is("li:visible"))return!1;e.val(c(this).text());b.hide();a.onSelect&&a.onSelect.call(e,c(this))}}).init();
return e}})(jQuery);